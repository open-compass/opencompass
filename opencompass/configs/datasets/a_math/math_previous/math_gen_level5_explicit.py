from opencompass.openicl.icl_prompt_template import PromptTemplate
from opencompass.openicl.icl_retriever import ZeroRetriever
from opencompass.openicl.icl_inferencer import GenInferencer
from opencompass.datasets import MATHDataset, MATHEvaluator, math_postprocess_v2

math_reader_cfg = dict(input_columns=['problem'], output_column='solution')
stop_words = ["</s>", "<|im_end|>", "<|endoftext|>","<|end_of_text|>","\nught","\nughtuser","\nQuestion","\nnoteq","\nosterone","nosteroneuser"]
round = [
{'role': 'HUMAN', 'prompt': "Question: What is the largest five-digit integer whose digits have a product equal to the product $(7)(6)(5)(4)(3)(2)(1)$?\nLet's think step by step\nSolution:"},
{'role': 'BOT', 'prompt': "Step 1: Find the prime factorization of the product.\n\\[7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1 = 7 \\cdot 5 \\cdot 3^2 \\cdot 2^4.\\]\n\nStep 2: Assign the digits from largest to smallest.\nThe largest single-digit number is $9$, which can be obtained from $3^2$.\nThis leaves $7 \\cdot 5 \\cdot 2^4$.\n\nStep 3: Form the next largest digits.\nThe next largest number is $8$, formed from $2^3$.\nThis leaves $7 \\cdot 5 \\cdot 2$.\n\nStep 4: Assign the remaining digits.\nThe remaining numbers are $7$, $5$, and $2$.\n\nStep 5: Arrange digits in descending order.\nThe largest five-digit integer is $\\boxed{98752}.$"},
{'role': 'HUMAN', 'prompt': "Question: The number 236! ends in how many zeros when expressed as an integer?\nLet's think step by step\nSolution:"},
{'role': 'BOT', 'prompt': 'Step 1: To determine the number of terminal zeros in $236!$, we need to count the number of factors of $2\\times5$. Since there are more factors of 2 than factors of 5, the number of terminal zeros is determined by the number of factors of 5.\n\nStep 2: Calculate the number of factors of 5 in $236!$. This is done by summing $\\left\\lfloor \\frac{236}{5}\\right\\rfloor$, $\\left\\lfloor \\frac{236}{25}\\right\\rfloor$, and $\\left\\lfloor \\frac{236}{125}\\right\\rfloor$:\n\\[\\left\\lfloor \\frac{236}{5}\\right\\rfloor = 47,\\quad \\left\\lfloor \\frac{236}{25}\\right\\rfloor = 9,\\quad \\left\\lfloor \\frac{236}{125}\\right\\rfloor = 1.\\]\n\nStep 3: Add these results: $47 + 9 + 1 = 57$. Thus, $236!$ ends in $\\boxed{57}$ zeros.\n'},
{'role': 'HUMAN', 'prompt': "Question: Find the positive solution to\n\\[\\sqrt[3]{x + \\sqrt[3]{x + \\sqrt[3]{x + \\dotsb}}} = \\sqrt[3]{x \\sqrt[3]{x \\sqrt[3]{x \\dotsm}}}.\\]\nLet's think step by step\nSolution:"},
{'role': 'BOT', 'prompt': 'Step 1: Let\n\\[y = \\sqrt[3]{x \\sqrt[3]{x \\sqrt[3]{x \\dotsm}}}.\\]\nThen we have:\n\\[y^3 = x \\sqrt[3]{x \\sqrt[3]{x \\dotsm}} = xy.\\]\nThis simplifies to $y^2 = x$.\n\nStep 2: Let\n\\[z = \\sqrt[3]{x + \\sqrt[3]{x + \\sqrt[3]{x + \\dotsb}}}.\\]\nThen we have:\n\\[z^3 = x + \\sqrt[3]{x + \\sqrt[3]{x + \\dotsb}} = x + z.\\]\nThis simplifies to $z^3 - z = x$.\n\nStep 3: Since $z = y$, substitute $y^2$ for $x$ into $z^3 - z = x$, giving:\n\\[y^3 - y = y^2.\\]\nRearranging gives:\n\\[y^3 - y^2 - y = 0.\\]\nFactoring out $y$, we get:\n\\[y(y^2 - y - 1) = 0.\\]\n\nStep 4: Solve $y^2 - y - 1 = 0$ using the quadratic formula:\n\\[y = \\frac{1 \\pm \\sqrt{5}}{2}.\\]\nSince $y$ is positive:\n\\[y = \\frac{1 + \\sqrt{5}}{2}.\\]\n\nStep 5: Find $x$: $x = y^2$, so:\n\\[x = \\left(\\frac{1 + \\sqrt{5}}{2}\\right)^2 = \\frac{3 + \\sqrt{5}}{2}.\\]\nThus, the positive solution is $\\boxed{\\frac{3 + \\sqrt{5}}{2}}$.\n'},
{'role': 'HUMAN', 'prompt': "Question: The graph of the quadratic $y = ax^2 + bx + c$ has the following properties: (1) The maximum value of $y = ax^2 + bx + c$ is 5, which occurs at $x = 3$. (2) The graph passes through the point $(0,-13)$. If the graph passes through the point $(4,m)$, then what is the value of $m$?\nLet's think step by step\nSolution:"},
{'role': 'BOT', 'prompt': 'Step 1: Since the maximum value of $y = ax^2 + bx + c$ is 5 at $x = 3$, the vertex form of the quadratic is:\n\\[y = a(x - 3)^2 + 5.\\]\n\nStep 2: The graph passes through $(0, -13)$. Substituting these values:\n\\[-13 = a(0 - 3)^2 + 5.\\]\nSimplify:\n\\[-13 = 9a + 5.\\]\nSolve for $a$:\n\\[a = \\frac{-18}{9} = -2.\\]\n\nStep 3: Substitute $a = -2$ into the vertex form:\n\\[y = -2(x - 3)^2 + 5.\\]\n\nStep 4: Find $m$ when $x = 4$:\n\\[m = -2(4 - 3)^2 + 5 = -2(1) + 5 = 3.\\]\nThus, $m = \\boxed{3}$.'},
{'role': 'HUMAN', 'prompt': "Question: Two congruent right circular cones each with base radius $3$ and height $8$ have the axes of symmetry that intersect at right angles at a point in the interior of the cones a distance $3$ from the base of each cone. A sphere with radius $r$ lies within both cones. The maximum possible value of $r^2$ is $\\\frac{m}{n}$, where $m$ and $n$ are relatively prime positive integers. Find $m+n$.\n\nLet's think step by step\nSolution:"},
{'role': 'BOT', 'prompt': "Step 1: Understand the setup.  \nThe sphere lies within both cones, and its radius is maximized when it is tangent to the sides of both cones.  \n\nStep 2: Determine the relevant geometry.  \nThe axes of the cones intersect at right angles. The base radius of each cone is $3$, and the height is $8$. The distance from the apex of each cone to the point of intersection is $5$, calculated using the Pythagorean theorem: \\\( \\\\sqrt{8^2 + 3^2} = \\\\sqrt{73} \\\).  \n\nStep 3: Relate the sphere’s radius to the geometry of the cones.  \nLet the sphere’s center be at the intersection of the axes. The sphere is tangent to the slant height of the cone. Using similar triangles formed by the slant height, the radius of the sphere, and the axis of symmetry, the radius of the sphere is proportional to the dimensions of the cone.  \n\nStep 4: Calculate the radius of the sphere.  \nUsing the geometry, the radius of the sphere is given by \\\( r = \\\\frac{15}{\\\\sqrt{73}} \\\).  \n\nStep 5: Calculate \\\( r^2 \\\) and simplify.  \n\\[  \nr^2 = \\\left( \\\\frac{15}{\\\\sqrt{73}} \\\\right)^2 = \\\\frac{225}{73}.  \n\\]  \n\nStep 6: Find \\\( m + n \\\).  \nHere, \\\( m = 225 \\\) and \\\( n = 73 \\\), so \\\( m + n = \\\\boxed{298} \\\).  \n"},
{'role': 'HUMAN', 'prompt': "Question: A rectangle is called cool if the number of square units in its area is equal to twice the number of units in its perimeter. A cool rectangle also must have integer side lengths. What is the sum of all the different possible areas of cool rectangles?\nLet's think step by step\nSolution:"},
{'role': 'BOT', 'prompt': "Step 1: Express the conditions algebraically.  \nLet the side lengths of the rectangle be \\\( a \\\) and \\\( b \\\). The area is \\\( ab \\\), and the perimeter is \\\( 2(a+b) \\\).  \nThe condition is \\\( ab = 4(a+b) \\\).  \n\nStep 2: Rearrange the equation.  \nRewriting the equation gives \\\( ab - 4a - 4b = 0 \\\). Adding 16 to both sides allows factoring:  \n\\[  \n(a-4)(b-4) = 16.  \n\\]  \n\nStep 3: Solve for integer pairs \\\( (a, b) \\\).  \nThe factors of $16$ are \\\( (1,16), (2,8), (4,4) \\\) and their reverses. Adding $4$ to each factor gives the valid pairs \\\( (a, b) \\\):  \n\\[  \n(5, 20), (6, 12), (8, 8).  \n\\]  \n\nStep 4: Calculate the areas of the rectangles.  \nThe areas are \\\( 5 \\\times 20 = 100, 6 \\\times 12 = 72, \\\text{ and } 8 \\\times 8 = 64. \\\)  \n\nStep 5: Sum the unique areas.  \nThe sum of the areas is \\\( 100 + 72 + 64 = \\\\boxed{236} \\\).  \n"},
{'role': 'HUMAN', 'prompt': "Problem:\n{problem}\nLet's think step by step\nSolution:"}
]
# round = [
# {'role': 'HUMAN', 'prompt': "Question: If $\\mathbf{a},$ $\\mathbf{b},$ and $\\mathbf{c}$ are unit vectors, then find the largest possible value of\n\\[\\|\\mathbf{a} - \\mathbf{b}\\|^2 + \\|\\mathbf{a} - \\mathbf{c}\\|^2 + \\|\\mathbf{b} - \\mathbf{c}\\|^2.\\]Note: A unit vector is a vector of magnitude 1.\nLet's think step by step\nSolution:"},
# {'role': 'BOT', 'prompt': "Step 1: Expand the terms using vector norms.\n\\begin{align*}\n\\|\\mathbf{a} - \\mathbf{b}\\|^2 &= (\\mathbf{a} - \\mathbf{b}) \\cdot (\\mathbf{a} - \\mathbf{b}) \\\\\n&= \\mathbf{a} \\cdot \\mathbf{a} - 2 \\mathbf{a} \\cdot \\mathbf{b} + \\mathbf{b} \\cdot \\mathbf{b} \\\\\n&= \\|\\mathbf{a}\\|^2 - 2 \\mathbf{a} \\cdot \\mathbf{b} + \\|\\mathbf{b}\\|^2 \\\\\n&= 2 - 2 \\mathbf{a} \\cdot \\mathbf{b}.\n\\end{align*}\nSimilarly, $\\|\\mathbf{a} - \\mathbf{c}\\|^2 = 2 - 2 \\mathbf{a} \\cdot \\mathbf{c}$ and $\\|\\mathbf{b} - \\mathbf{c}\\|^2 = 2 - 2 \\mathbf{b} \\cdot \\mathbf{c}.$\n\nStep 2: Combine the terms.\n\\[\\|\\mathbf{a} - \\mathbf{b}\\|^2 + \\|\\mathbf{a} - \\mathbf{c}\\|^2 + \\|\\mathbf{b} - \\mathbf{c}\\|^2 = 6 - 2 (\\mathbf{a} \\cdot \\mathbf{b} + \\mathbf{a} \\cdot \\mathbf{c} + \\mathbf{b} \\cdot \\mathbf{c}).\\]\n\nStep 3: Use properties of unit vectors.\n\\[\\|\\mathbf{a} + \\mathbf{b} + \\mathbf{c}\\|^2 \\ge 0.\\]\nExpanding:\n\\[\\|\\mathbf{a}\\|^2 + \\|\\mathbf{b}\\|^2 + \\|\\mathbf{c}\\|^2 + 2 \\mathbf{a} \\cdot \\mathbf{b} + 2 \\mathbf{a} \\cdot \\mathbf{c} + 2 \\mathbf{b} \\cdot \\mathbf{c} \\ge 0.\\]\nThis gives:\n\\[2 (\\mathbf{a} \\cdot \\mathbf{b} + \\mathbf{a} \\cdot \\mathbf{c} + \\mathbf{b} \\cdot \\mathbf{c}) \\ge -3.\\]\n\nStep 4: Calculate the maximum value.\n\\[\\|\\mathbf{a} - \\mathbf{b}\\|^2 + \\|\\mathbf{a} - \\mathbf{c}\\|^2 + \\|\\mathbf{b} - \\mathbf{c}\\|^2 = 6 - 2 (\\mathbf{a} \\cdot \\mathbf{b} + \\mathbf{a} \\cdot \\mathbf{c} + \\mathbf{b} \\cdot \\mathbf{c}) \\le 9.\\]\nEquality occurs when $\\mathbf{a},$ $\\mathbf{b},$ and $\\mathbf{c}$ are equally spaced on a circle with radius 1 (forming an equilateral triangle).\n\nFinal Answer: The largest possible value is $\\boxed{9}.$"},
# {'role': 'HUMAN', 'prompt': "Question: What is the largest five-digit integer whose digits have a product equal to the product $(7)(6)(5)(4)(3)(2)(1)$?\nLet's think step by step\nSolution:"},
# {'role': 'BOT', 'prompt': "Step 1: Find the prime factorization of the product.\n\\[7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1 = 7 \\cdot 5 \\cdot 3^2 \\cdot 2^4.\\]\n\nStep 2: Assign the digits from largest to smallest.\nThe largest single-digit number is $9$, which can be obtained from $3^2$.\nThis leaves $7 \\cdot 5 \\cdot 2^4$.\n\nStep 3: Form the next largest digits.\nThe next largest number is $8$, formed from $2^3$.\nThis leaves $7 \\cdot 5 \\cdot 2$.\n\nStep 4: Assign the remaining digits.\nThe remaining numbers are $7$, $5$, and $2$.\n\nStep 5: Arrange digits in descending order.\nThe largest five-digit integer is $\\boxed{98752}.$"},
# {'role': 'HUMAN', 'prompt': "Question: The number 236! ends in how many zeros when expressed as an integer?\nLet's think step by step\nSolution:"},
# {'role': 'BOT', 'prompt': 'Step 1: To determine the number of terminal zeros in $236!$, we need to count the number of factors of $2\\times5$. Since there are more factors of 2 than factors of 5, the number of terminal zeros is determined by the number of factors of 5.\n\nStep 2: Calculate the number of factors of 5 in $236!$. This is done by summing $\\left\\lfloor \\frac{236}{5}\\right\\rfloor$, $\\left\\lfloor \\frac{236}{25}\\right\\rfloor$, and $\\left\\lfloor \\frac{236}{125}\\right\\rfloor$:\n\\[\\left\\lfloor \\frac{236}{5}\\right\\rfloor = 47,\\quad \\left\\lfloor \\frac{236}{25}\\right\\rfloor = 9,\\quad \\left\\lfloor \\frac{236}{125}\\right\\rfloor = 1.\\]\n\nStep 3: Add these results: $47 + 9 + 1 = 57$. Thus, $236!$ ends in $\\boxed{57}$ zeros.\n'},
# {'role': 'HUMAN', 'prompt': "Question: Find the positive solution to\n\\[\\sqrt[3]{x + \\sqrt[3]{x + \\sqrt[3]{x + \\dotsb}}} = \\sqrt[3]{x \\sqrt[3]{x \\sqrt[3]{x \\dotsm}}}.\\]\nLet's think step by step\nSolution:"},
# {'role': 'BOT', 'prompt': 'Step 1: Let\n\\[y = \\sqrt[3]{x \\sqrt[3]{x \\sqrt[3]{x \\dotsm}}}.\\]\nThen we have:\n\\[y^3 = x \\sqrt[3]{x \\sqrt[3]{x \\dotsm}} = xy.\\]\nThis simplifies to $y^2 = x$.\n\nStep 2: Let\n\\[z = \\sqrt[3]{x + \\sqrt[3]{x + \\sqrt[3]{x + \\dotsb}}}.\\]\nThen we have:\n\\[z^3 = x + \\sqrt[3]{x + \\sqrt[3]{x + \\dotsb}} = x + z.\\]\nThis simplifies to $z^3 - z = x$.\n\nStep 3: Since $z = y$, substitute $y^2$ for $x$ into $z^3 - z = x$, giving:\n\\[y^3 - y = y^2.\\]\nRearranging gives:\n\\[y^3 - y^2 - y = 0.\\]\nFactoring out $y$, we get:\n\\[y(y^2 - y - 1) = 0.\\]\n\nStep 4: Solve $y^2 - y - 1 = 0$ using the quadratic formula:\n\\[y = \\frac{1 \\pm \\sqrt{5}}{2}.\\]\nSince $y$ is positive:\n\\[y = \\frac{1 + \\sqrt{5}}{2}.\\]\n\nStep 5: Find $x$: $x = y^2$, so:\n\\[x = \\left(\\frac{1 + \\sqrt{5}}{2}\\right)^2 = \\frac{3 + \\sqrt{5}}{2}.\\]\nThus, the positive solution is $\\boxed{\\frac{3 + \\sqrt{5}}{2}}$.\n'},
# {'role': 'HUMAN', 'prompt': "Question: The graph of the quadratic $y = ax^2 + bx + c$ has the following properties: (1) The maximum value of $y = ax^2 + bx + c$ is 5, which occurs at $x = 3$. (2) The graph passes through the point $(0,-13)$. If the graph passes through the point $(4,m)$, then what is the value of $m$?\nLet's think step by step\nSolution:"},
# {'role': 'BOT', 'prompt': 'Step 1: Since the maximum value of $y = ax^2 + bx + c$ is 5 at $x = 3$, the vertex form of the quadratic is:\n\\[y = a(x - 3)^2 + 5.\\]\n\nStep 2: The graph passes through $(0, -13)$. Substituting these values:\n\\[-13 = a(0 - 3)^2 + 5.\\]\nSimplify:\n\\[-13 = 9a + 5.\\]\nSolve for $a$:\n\\[a = \\frac{-18}{9} = -2.\\]\n\nStep 3: Substitute $a = -2$ into the vertex form:\n\\[y = -2(x - 3)^2 + 5.\\]\n\nStep 4: Find $m$ when $x = 4$:\n\\[m = -2(4 - 3)^2 + 5 = -2(1) + 5 = 3.\\]\nThus, $m = \\boxed{3}$.'},
# {'role': 'HUMAN', 'prompt': "Question: How many integers $n$ satisfy the condition $100 < n < 200$ and the condition $n$ has the same remainder whether it is divided by $6$ or by $8$?\nLet's think step by step\nSolution:"},
# {"role": "BOT","prompt": "Step 1: Analyze the condition with the same remainder and establish the equation relationship\nSince it is known that when $n$ is divided by $6$ and by $8$, it has the same remainder. Let's assume that when $n$ is divided by $6$, it can be expressed as $n = 6a + r$ (where $a$ is the quotient and $0\\leq r \\leq 5$ is the remainder), and when $n$ is divided by $8$, it can be expressed as $n = 8b + r$ (where $b$ is the corresponding quotient).\n\nFrom this, we can get $6a + r = 8b + r$. By canceling out $r$ on both sides, we have $6a = 8b$. Further simplifying by dividing both sides by $2$, we obtain $3a = 4b$.\n\nStep 2: Determine the expression of $a$ in terms of $k$\nFrom the equation $3a = 4b$, it can be seen that $a$ must be a multiple of $4$. So we can set $a = 4k$ (where $k$ is an integer).\n\nStep 3: Determine the range of $k$ based on the range of $n$\nSubstitute $a = 4k$ into $n = 6a + r$, and we get $n = 6\\times 4k + r = 24k + r$.\n\nBecause $100 < n < 200$, we have $100 < 24k + r < 200$.\nConsidering the range of $r$ which is $0\\leq r \\leq 5$, to determine the approximate range of $k$, we first ignore $r$ and look at the range of $24k$, that is $100 - r \\leq 24k \\leq 200 - r$. Taking the strictest situation (when $r$ takes the minimum value of $0$ and the maximum value of $5$), we can get $95 \\leq 24k \\leq 195$ (here the range is slightly enlarged to facilitate determining the integer value range of $k$). Further, we have $\\frac{95}{24} < k < \\frac{195}{24}$.\nSince $k$ is an integer, the range of $k$ is $4\\leq k \\leq 8$.\n\nStep 4: Analyze the situation of the remainder $r$ corresponding to different $k$ values\nWhen $k = 4$, substitute $k = 4$ into $n = 24k + r$, and we get $n = 96 + r$.\nBecause $100 < n < 200$, only when $r = 5$ can it meet the range requirement at this time, that is, $n = 96 + 5 = 101$, which is only one case.\n\nWhen $k = 5$, $6$, $7$, $8$, for each such $k$ value, $r$ can take $6$ values of $0$, $1$, $2$, $3$, $4$, $5$, so there are a total of $4\\times6 = 24$ cases.\n\nStep 5: Calculate the total number of $n$ that meets the conditions\nAdding the $1$ case when $k = 4$ and the $24$ cases when $k = 5$, $6$, $7$, $8$, we can get that the total number of $n$ that meets the conditions is $1 + 24 = 25$.\n\nSo, there are a total of $ \\boxed{25}$ integers $n$ that meet the conditions."},
# {'role': 'HUMAN', 'prompt': "Question: Two congruent right circular cones each with base radius $3$ and height $8$ have the axes of symmetry that intersect at right angles at a point in the interior of the cones a distance $3$ from the base of each cone. A sphere with radius $r$ lies within both cones. The maximum possible value of $r^2$ is $\\\frac{m}{n}$, where $m$ and $n$ are relatively prime positive integers. Find $m+n$.\n\nLet's think step by step\nSolution:"},
# {'role': 'BOT', 'prompt': "Step 1: Understand the setup.  \nThe sphere lies within both cones, and its radius is maximized when it is tangent to the sides of both cones.  \n\nStep 2: Determine the relevant geometry.  \nThe axes of the cones intersect at right angles. The base radius of each cone is $3$, and the height is $8$. The distance from the apex of each cone to the point of intersection is $5$, calculated using the Pythagorean theorem: \\\( \\\\sqrt{8^2 + 3^2} = \\\\sqrt{73} \\\).  \n\nStep 3: Relate the sphere’s radius to the geometry of the cones.  \nLet the sphere’s center be at the intersection of the axes. The sphere is tangent to the slant height of the cone. Using similar triangles formed by the slant height, the radius of the sphere, and the axis of symmetry, the radius of the sphere is proportional to the dimensions of the cone.  \n\nStep 4: Calculate the radius of the sphere.  \nUsing the geometry, the radius of the sphere is given by \\\( r = \\\\frac{15}{\\\\sqrt{73}} \\\).  \n\nStep 5: Calculate \\\( r^2 \\\) and simplify.  \n\\[  \nr^2 = \\\left( \\\\frac{15}{\\\\sqrt{73}} \\\\right)^2 = \\\\frac{225}{73}.  \n\\]  \n\nStep 6: Find \\\( m + n \\\).  \nHere, \\\( m = 225 \\\) and \\\( n = 73 \\\), so \\\( m + n = \\\\boxed{298} \\\).  \n"},
# {'role': 'HUMAN', 'prompt': "Question: A rectangle is called cool if the number of square units in its area is equal to twice the number of units in its perimeter. A cool rectangle also must have integer side lengths. What is the sum of all the different possible areas of cool rectangles?\nLet's think step by step\nSolution:"},
# {'role': 'BOT', 'prompt': "Step 1: Express the conditions algebraically.  \nLet the side lengths of the rectangle be \\\( a \\\) and \\\( b \\\). The area is \\\( ab \\\), and the perimeter is \\\( 2(a+b) \\\).  \nThe condition is \\\( ab = 4(a+b) \\\).  \n\nStep 2: Rearrange the equation.  \nRewriting the equation gives \\\( ab - 4a - 4b = 0 \\\). Adding 16 to both sides allows factoring:  \n\\[  \n(a-4)(b-4) = 16.  \n\\]  \n\nStep 3: Solve for integer pairs \\\( (a, b) \\\).  \nThe factors of $16$ are \\\( (1,16), (2,8), (4,4) \\\) and their reverses. Adding $4$ to each factor gives the valid pairs \\\( (a, b) \\\):  \n\\[  \n(5, 20), (6, 12), (8, 8).  \n\\]  \n\nStep 4: Calculate the areas of the rectangles.  \nThe areas are \\\( 5 \\\times 20 = 100, 6 \\\times 12 = 72, \\\text{ and } 8 \\\times 8 = 64. \\\)  \n\nStep 5: Sum the unique areas.  \nThe sum of the areas is \\\( 100 + 72 + 64 = \\\\boxed{236} \\\).  \n"},
# {'role': 'HUMAN', 'prompt': "Problem:\n{problem}\nLet's think step by step\nSolution:"}
# ]
# que = round[-1]
# round = [round[4].copy(), round[5].copy()] * 8
# round.append(que)

math_infer_cfg = dict(
    prompt_template=dict(
        type=PromptTemplate,
        template=dict(round=round)),
    retriever=dict(type=ZeroRetriever),
    inferencer=dict(type=GenInferencer, max_out_len=4096, stopping_criteria=stop_words))

math_eval_cfg = dict(
    evaluator=dict(type=MATHEvaluator, version='v2'), pred_postprocessor=dict(type=math_postprocess_v2))

math_datasets = [
    dict(
        type=MATHDataset,
        abbr='math_level5_explicit',
        path='opencompass/math',
        reader_cfg=math_reader_cfg,
        infer_cfg=math_infer_cfg,
        eval_cfg=math_eval_cfg)
]
